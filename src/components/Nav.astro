---
---

<nav class="site-nav">
  <div class="nav-inner max-w-6xl mx-auto px-6 py-3 flex items-center justify-between">
    <div class="nav-left flex items-center gap-3">
      <a href="/" class="nav-link brand-text">Leidi Silvan</a>
    </div>

    <div class="nav-right flex gap-4 items-center">
  <a href="#tecnologias" class="nav-link">Tecnologías</a>
  <a href="#cursos" class="nav-link">Cursos</a>
  <a href="#proyectos" class="nav-link">Proyectos</a>
  <a href="#contactame" class="nav-link">Contáctame</a>
    </div>

    <!-- botón para móviles -->
    <div class="md:hidden">
      <button aria-label="Abrir navegación" aria-expanded="false" id="nav-toggle" class="nav-toggle">☰</button>
    </div>
  </div>

  <!-- menú móvil oculto por defecto -->
    <div id="mobile-menu" class="mobile-menu hidden">
    <a href="#tecnologias" class="mobile-link">Tecnologías</a>
    <a href="#cursos" class="mobile-link">Cursos</a>
    <a href="#proyectos" class="mobile-link">Proyectos</a>
    <a href="#contactame" class="mobile-link">Contáctame</a>
  </div>

  <style>
  :root{ --nav-bg-1: #453c57; --nav-bg-2: #733876; --nav-text: #ffffff }
  /* Keep the navbar fixed so it's visible at all times */
  .site-nav{ position: fixed; top: 0; left: 0; right: 0; width: 100%; z-index:80; background: linear-gradient(90deg,var(--nav-bg-1),var(--nav-bg-2)); box-shadow: 0 8px 30px rgba(2,6,23,0.6); }
    .nav-inner{ display:flex; align-items:center; justify-content:space-between; }
  .brand-text{ color: white; font-weight:800; font-size:1.15rem; letter-spacing:0.2px; padding:6px 10px; border-radius:999px; background: rgba(255,255,255,0.03); }

  /* show desktop links by default; hide on small screens (mobile) */
  .nav-right{ display:flex; }
  .nav-link{ color: white; text-decoration:none; font-weight:600; padding:8px 12px; border-radius:999px; transition: all 160ms ease; background: rgba(255,255,255,0.04); }
  .nav-link:hover{ transform: translateY(-3px); background: rgba(255,255,255,0.08); box-shadow: 0 10px 30px rgba(2,6,23,0.5); }

    /* mobile menu */
  .mobile-menu{ display:flex; flex-direction:column; gap:8px; padding:12px 16px; background: linear-gradient(180deg, rgba(7,16,41,0.92), rgba(11,18,32,0.96)); border-top: 1px solid rgba(255,255,255,0.04); }
  /* utility hidden class used by the toggle script */
  .hidden { display: none !important; }
  .mobile-link{ color: white; text-decoration:none; padding:10px 12px; border-radius:8px; background: rgba(255,255,255,0.04); font-weight:700 }

  .nav-toggle{ background: rgba(255,255,255,0.06); color: white; border: none; padding:8px 10px; border-radius:8px; font-size:1.1rem; cursor:pointer }

  /* active link styles: underline centered below the link text */
  :root { --nav-accent: #ffffff; }
  .nav-link, .mobile-link { position: relative; }
  .nav-link.active, .mobile-link.active {
    background: transparent !important;
    color: var(--nav-accent);
    box-shadow: none;
    transform: none;
  }
  .nav-link.active::after, .mobile-link.active::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: -6px;
    width: 40%;
    height: 3px;
    background: var(--nav-accent);
    border-radius: 2px;
  }

  /* For small screens hide desktop links; mobile menu is toggled via the .hidden utility */
  @media (max-width: 767px) {
    .nav-right{ display: none; }
  }

  /* On desktop hide the mobile menu container to avoid duplicates */
  @media (min-width: 768px) {
    .mobile-menu{ display: none !important; }
  }
  </style>

  <script>
    (function(){
      const btn = document.getElementById('nav-toggle');
      const menu = document.getElementById('mobile-menu');
      if(btn && menu){
        btn.addEventListener('click', ()=>{
          menu.classList.toggle('hidden');
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
        });
      }

      // mark active links in desktop and mobile nav
      // mark active links: prefer location.hash (SPA anchors), otherwise fall back to pathname
      const hash = window.location.hash; // includes leading '#'
      const desktopLinks = /** @type {NodeListOf<HTMLAnchorElement>} */ (document.querySelectorAll('.nav-right a.nav-link'));
      desktopLinks.forEach((link) => {
        try{
          const href = link.getAttribute('href');
          if(!href) return;
          if(hash && href.startsWith('#')){
            if(href === hash){ link.classList.add('active'); link.setAttribute('aria-current','page'); }
          } else {
            // fallback: compare pathname as before
            const url = new URL(href, window.location.origin);
            let lp = url.pathname;
            lp = lp.endsWith('/') && lp.length>1 ? lp.slice(0,-1) : lp;
            const locationPath = (p => { if(!p) return '/'; return p.endsWith('/') && p.length>1 ? p.slice(0,-1) : p; })(window.location.pathname);
            if(lp === locationPath || (lp !== '/' && locationPath.startsWith(lp))){ link.classList.add('active'); link.setAttribute('aria-current','page'); }
          }
        }catch(e){ }
      });

      const mobileLinks = /** @type {NodeListOf<HTMLAnchorElement>} */ (document.querySelectorAll('#mobile-menu a.mobile-link'));
      mobileLinks.forEach((link) => {
        try{
          const href = link.getAttribute('href');
          if(!href) return;
          if(hash && href.startsWith('#')){
            if(href === hash){ link.classList.add('active'); link.setAttribute('aria-current','page'); }
          } else {
            const url = new URL(href, window.location.origin);
            let lp = url.pathname;
            lp = lp.endsWith('/') && lp.length>1 ? lp.slice(0,-1) : lp;
            const locationPath = (p => { if(!p) return '/'; return p.endsWith('/') && p.length>1 ? p.slice(0,-1) : p; })(window.location.pathname);
            if(lp === locationPath || (lp !== '/' && locationPath.startsWith(lp))){ link.classList.add('active'); link.setAttribute('aria-current','page'); }
          }
        }catch(e){ }
      });
    
      // expose nav height as a CSS variable so pages can avoid being overlapped
      try{
        const navEl = document.querySelector('.site-nav');
        function setNavHeight(){
          if(!navEl) return;
          const h = navEl.getBoundingClientRect().height || 0;
          document.documentElement.style.setProperty('--nav-height', h + 'px');
        }
        setNavHeight();
        window.addEventListener('resize', setNavHeight);
        const mo = new MutationObserver(setNavHeight);
        if(navEl) mo.observe(navEl, { attributes: true, childList: true, subtree: true });
      }catch(e){}
      // Observe sections and update active nav link on scroll (SPA behavior)
      try{
        const getNavHeight = () => {
          const val = getComputedStyle(document.documentElement).getPropertyValue('--nav-height') || '64px';
          const n = parseInt(val.trim().replace('px',''), 10);
          return isFinite(n) ? n : 64;
        };

        const sections = /** @type {NodeListOf<HTMLElement>} */ (document.querySelectorAll('section[id]'));
        if(sections && sections.length){
          const observer = new IntersectionObserver((entries) => {
            // pick the most visible section (highest intersectionRatio) and mark only its links active
            const visible = entries.filter(e => e.isIntersecting).sort((a,b) => b.intersectionRatio - a.intersectionRatio);
            // clear previous active states
            document.querySelectorAll('.nav-right a.nav-link.active, #mobile-menu a.mobile-link.active').forEach(el => {
              el.classList.remove('active');
              el.removeAttribute('aria-current');
            });

            if(visible.length){
              const top = visible[0].target;
              const id = '#' + top.id;
              const desktopLink = document.querySelector('.nav-right a.nav-link[href="' + id + '"]');
              const mobileLink = document.querySelector('#mobile-menu a.mobile-link[href="' + id + '"]');
              if(desktopLink){ desktopLink.classList.add('active'); desktopLink.setAttribute('aria-current','page'); }
              if(mobileLink){ mobileLink.classList.add('active'); mobileLink.setAttribute('aria-current','page'); }
            }
          }, {
            root: null,
            rootMargin: `-${getNavHeight()}px 0px -40% 0px`,
            threshold: 0.25
          });

          sections.forEach(s => observer.observe(s));
          // update observer when nav height changes
          const moNav = new MutationObserver(() => { observer.disconnect(); sections.forEach(s => observer.observe(s)); });
          const navEl = document.querySelector('.site-nav');
          if(navEl) moNav.observe(navEl, { attributes: true, childList: true, subtree: true });
        }
      }catch(e){}
    })();
  </script>
</nav>
